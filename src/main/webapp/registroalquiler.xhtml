<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"

      xmlns:p="http://primefaces.org/ui">
	
	<h:head>
		<link rel="stylesheet" type="text/css" href="registroalquiler.css" />
		
    </h:head>
    
    <h:body>

		<h1>Videotienda - Registro alquiler</h1>
        <h:form id="registroAlquiler_form">
            <section>
                <div style="text-align: center" class='table'>
                
                    <p:dataTable class="alquiler" value="#{AlquilerBean.listaRentados}" var = "itemRentado" style="margin: 0 auto;"
                    rows="10" paginator="true" 
    				paginatorTemplate="{RowsPerPageDropdown} {CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" 
    				rowsPerPageTemplate="5,10,15">
    				
    					<p:column headerText="Id" filterBy="#{itemRentado.id}">
                        	<h:outputText value="#{itemRentado.id}"></h:outputText>
                        </p:column>            
						
                        <p:column headerText="Inicio de Renta" filterBy="#{itemRentado.fechainiciorenta}">
                        	<h:outputText value="#{itemRentado.fechainiciorenta}"></h:outputText>
                        </p:column>

                        <p:column headerText="Fin de Renta" filterBy="#{itemRentado.fechafinrenta}">
                        	<h:outputText value="#{itemRentado.fechafinrenta}"></h:outputText>
                        </p:column>       
                        
                        <p:column headerText="Valor Multa" filterBy="#{AlquilerBean.actionGetMulta(itemRentado.id,itemRentado.fechafinrenta)}">
                        	<h:outputText value="#{AlquilerBean.actionGetMulta(itemRentado.id,itemRentado.fechafinrenta)}"></h:outputText>
                        </p:column>   

                    </p:dataTable>
                </div>  
              
            </section>
			
			<br/>
			
			<section>
				<div style="text-align: center">
					<br/>
            		
            		<h2>Registrar alquiler</h2>
            		
            		<br/>
            	
	            	<div >
	            		<span class="label idItem">Item </span>
	    				<p:inputText id ="idItem" value="#{AlquilerBean.idItem}" placeholder="Introduce el id del item" class="form-control"/>
					</div>
						
					<br/>
					
					<div class="form-group">
    					<span class="label numdias">D&#237;as </span>
    					<p:inputText id ="numdias" value="#{AlquilerBean.numdias}" placeholder="Introduce el número de días" class="form-control"/>
					</div>
					
					<br/>
					
					<div>
    					<p:commandButton value="Costo" action="#{AlquilerBean.actionSetCosto}" update="registroAlquiler_form"/>
						<br/>
						<p>
							<b>El costo de alquiler es: </b> <p:outputLabel  value="#{AlquilerBean.costo}" />
							<br/>
		    				<b>Estado del item: </b> <p:outputLabel value="#{AlquilerBean.estado}"/> &nbsp;
						</p>
					</div>
					
					<br/>
					
					<div style="text-align: center">
						<p:commandButton id= "alquilar" value="Alquilar" action="#{AlquilerItemsBean.page1}" actionListener="#{AlquilerBean.registrarAlquilerCliente}" update="registroAlquiler_form"></p:commandButton>    
						<p:commandButton id= "back" value="Back" action="#{AlquilerItemsBean.page1}" update="registroAlquiler_form"></p:commandButton>
					</div>
					<br/><br/>
				</div>
			
			</section>

        </h:form>

    </h:body>
    
</html>